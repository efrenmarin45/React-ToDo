(this["webpackJsonpreact-todo"]=this["webpackJsonpreact-todo"]||[]).push([[0],{60:function(e,t,n){},69:function(e,t,n){"use strict";n.r(t);var r,o,c,a,i=n(3),s=n(52),d=n.n(s),u=n(22),l=n.n(u),j=n(36),b=n(21),p=n(27),h=(n(60),n(14)),O=n(8),x=Object(h.gql)(r||(r=Object(p.a)(["\n  query getTodos{\n    todos{\n      id\n      text\n      done\n    }\n  }\n"]))),f=Object(h.gql)(o||(o=Object(p.a)(["\n  mutation toggleTodo($id: uuid!, $done: Boolean!) {\n    update_todos(where: {id: {_eq: $id}}, _set: {done: $done}) {\n      returning {\n        done\n        id\n        text\n      }\n    }\n  }\n"]))),m=Object(h.gql)(c||(c=Object(p.a)(["\n  mutation addTodo($text: String!) {\n    insert_todos(objects: {text: $text}) {\n      returning {\n        done\n        id\n        text\n      }\n    }\n  }\n"]))),g=Object(h.gql)(a||(a=Object(p.a)(["\n  mutation deleteTodo($id: uuid!) {\n    delete_todos(where: {id: {_eq: $id}}) {\n      returning {\n        done\n        id\n        text\n      }\n    }\n  }\n"])));var v=function(){var e=Object(i.useState)(""),t=Object(b.a)(e,2),n=t[0],r=t[1],o=Object(h.useQuery)(x),c=o.data,a=o.loading,s=o.error,d=Object(h.useMutation)(f),u=Object(b.a)(d,1)[0],p=Object(h.useMutation)(g),v=Object(b.a)(p,1)[0],y=Object(h.useMutation)(m,{onCompleted:function(){return r("")}}),w=Object(b.a)(y,1)[0];function k(){return(k=Object(j.a)(l.a.mark((function e(t){var n,r,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.done,e.next=3,u({variables:{id:n,done:!r}});case 3:o=e.sent,console.log(o);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function q(){return(q=Object(j.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),n.trim()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,w({variables:{text:n},refetchQueries:[{query:x}]});case 5:r=e.sent,console.log(r);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function N(){return(N=Object(j.a)(l.a.mark((function e(t){var n,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,e.next=3,v({variables:{id:n},update:function(e){var t=e.readQuery({query:x}).todos.filter((function(e){return e.id!==n}));e.writeQuery({query:x,data:{todos:t}})}});case 3:r=e.sent,console.log(r);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return a?Object(O.jsx)("div",{children:"Loading..."}):s?Object(O.jsx)("h1",{children:"Error fetching Data"}):Object(O.jsxs)("div",{className:"container",children:[Object(O.jsx)("div",{className:"topSection",children:Object(O.jsx)("h1",{className:"title",children:"Things To Do"})}),Object(O.jsxs)("div",{className:"formSection",children:[Object(O.jsxs)("form",{onSubmit:function(e){return q.apply(this,arguments)},children:[Object(O.jsx)("input",{type:"text",placeholder:"Add a goal for today",onChange:function(e){return r(e.target.value)},value:n}),Object(O.jsx)("button",{className:"createBtn",type:"submit",children:"Create"})]}),Object(O.jsx)("div",{className:"intro",children:Object(O.jsxs)("p",{children:["Double click a goal to mark it done.",Object(O.jsx)("br",{})," Select the 'X' to remove the goal altogether."]})})]}),Object(O.jsx)("div",{className:"todos",children:c.todos.map((function(e){return Object(O.jsxs)("p",{onDoubleClick:function(){return function(e){return k.apply(this,arguments)}(e)},children:[Object(O.jsx)("span",{className:"todoText ".concat(e.done&&"strike"),children:e.text}),Object(O.jsx)("button",{className:"delete",onClick:function(){return function(e){return N.apply(this,arguments)}(e)},children:" \xd7"})]},e.id)}))})]})},y=new h.ApolloClient({uri:"https://react-todo-apollo.hasura.app/v1/graphql",cache:new h.InMemoryCache});d.a.render(Object(O.jsx)(h.ApolloProvider,{client:y,children:Object(O.jsx)(v,{})}),document.getElementById("root"))}},[[69,1,2]]]);
//# sourceMappingURL=main.7bb19ddf.chunk.js.map